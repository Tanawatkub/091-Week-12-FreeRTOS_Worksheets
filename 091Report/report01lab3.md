# üß† Week 12: ESP-IDF Basic Project and Environment Setup  
**‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢:** Tanawat Putta (67030091)  
**‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤:** Microcontroller Applications  

## ‚úÖ Checklist ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

- [‚úÖ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à  
- [‚úÖ] ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Task parameters ‡πÅ‡∏•‡∏∞ return values  
- [‚úÖ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Task priorities  
- [‚úÖ] ‡πÉ‡∏ä‡πâ Task management APIs (suspend/resume)  
- [‚úÖ] ‡πÅ‡∏™‡∏î‡∏á runtime statistics  
- [‚úÖ] ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡∏£‡∏ö  

---

## üß© ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô

### 1Ô∏è‚É£ ‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î Task function ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ **infinite loop** ?
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö FreeRTOS ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Task ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤**  
‡πÄ‡∏ä‡πà‡∏ô‡πÉ‡∏ô `led1_task()`, `led2_task()`, ‡∏´‡∏£‡∏∑‡∏≠ `system_info_task()`  
‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ loop ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏∞‡∏à‡∏ö‡πÅ‡∏•‡∏∞ Task ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ  

**‡∏™‡∏£‡∏∏‡∏õ:**  
Task ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏•‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡πÑ‡∏ü LED, ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå)

---

### 2Ô∏è‚É£ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á **stack size** ‡πÉ‡∏ô `xTaskCreate()`
‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î stack size ‡∏Ñ‡∏∑‡∏≠ **‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥ (RAM)** ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Task ‡∏ô‡∏±‡πâ‡∏ô ‡πÜ  
‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà return, ‡πÅ‡∏•‡∏∞ context ‡∏Ç‡∏≠‡∏á Task  

**‡∏™‡∏£‡∏∏‡∏õ:**  
- Stack size ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚Üí ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥  
- Stack size ‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚Üí ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î stack overflow  

---

### 3Ô∏è‚É£ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á `vTaskDelay()` ‡πÅ‡∏•‡∏∞ `vTaskDelayUntil()`
| ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô | ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô |
|-----------|----------------|
| `vTaskDelay()` | ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö |
| `vTaskDelayUntil()` | ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏ö‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‚Üí ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ Task ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‚Äú‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‚Äù |

**‡∏™‡∏£‡∏∏‡∏õ:**  
- `vTaskDelay()` ‚Üí ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ  
- `vTaskDelayUntil()` ‚Üí ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö Task ‡πÅ‡∏ö‡∏ö periodic (‡πÄ‡∏ä‡πà‡∏ô sampling sensor ‡∏ó‡∏∏‡∏Å 100 ms)

---

### 4Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ `vTaskDelete(NULL)` vs `vTaskDelete(handle)`
| ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|-----------|----------|
| `vTaskDelete(NULL)` | ‡∏•‡∏ö Task ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö |
| `vTaskDelete(handle)` | ‡∏•‡∏ö Task ‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ handle ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å `xTaskCreate()` |

**‡∏™‡∏£‡∏∏‡∏õ:**  
`vTaskDelete(NULL)` ‚Üí Task ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á  
`vTaskDelete(handle)` ‚Üí ‡πÉ‡∏ä‡πâ‡∏•‡∏ö Task ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤

---

### 5Ô∏è‚É£ Priority 0 ‡∏Å‡∏±‡∏ö Priority 24 ‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤?
Priority **24 ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 0**  
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô FreeRTOS ‡∏Ñ‡πà‡∏≤‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å ‚Üí ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏î‡πâ CPU ‡∏Å‡πà‡∏≠‡∏ô  

**‡∏™‡∏£‡∏∏‡∏õ:**  
- Task ‡∏ó‡∏µ‡πà‡∏°‡∏µ priority ‡∏™‡∏π‡∏á‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô  
- ‡∏ñ‡πâ‡∏≤ priority ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **Round-Robin Scheduling**

---